if (self.CavalryLogger) { CavalryLogger.start_js(["g\/pUCUO"]); }

__d("PagesMessageSender",["MercuryMessageActions","MercuryMessageObject","MessengerDiscoveryEntryPointsLoggingHelper"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e){this.__senderID=a,this.__threadID=b,this.__messageActions=c("MercuryMessageActions").getForFBID(a),this.__messageObject=c("MercuryMessageObject").getForFBID(a),this.__creatorInfo=e?e:null,this.__pageID=d}var b=a.prototype;b.__willSendMessage=function(a){};b.getTargetThreadID=function(){return this.__threadID};b.sendMessage=function(a,b){this.__willSendMessage(a);var c=[];b&&c.push(d("MessengerDiscoveryEntryPointsLoggingHelper").getEntryPointsLoggingTagStr([b]));b=this.__messageObject.constructUserGeneratedMessageObject(a,"source:titan:web",this.__threadID,null,this.__creatorInfo,c);this.__messageActions.send(b)};return a}();g["default"]=a}),98);
__d("PagePluginMessageSender",["PagePluginEvents","PagePluginLogger","PagesMessageSender"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d,e,f){b=a.call(this,b,d,e,null)||this;b.$PagePluginMessageSender1=new(c("PagePluginLogger"))(e,f);return b}var d=b.prototype;d.__willSendMessage=function(a){this.$PagePluginMessageSender1.notify(c("PagePluginEvents").page_plugin.messages.send,"messages",{message:a})};return b}(c("PagesMessageSender"));g["default"]=a}),98);
__d("XPluginPageMessagesTabSentryConfirmActionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/plugins/confirm/page/messages/action/",{})}),null);
__d("XPluginPageMessagesTabSentryController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/plugins/page/messages/confirm/",{})}),null);
__d("XPluginPageMessagesTabSentryPopupPluginController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/plugins/confirm/page/messages/send/",{page_id:{type:"String",required:!0},message:{type:"String",required:!0},thread_id:{type:"String",required:!0},iframe_referer:{type:"String",defaultValue:""}})}),null);
__d("PagePluginMessagesTab.react",["cx","fbt","ix","AbstractTextArea.react","AsyncRequest","Image.react","Layout.react","Link.react","ODS","PagePluginEvents","PagePluginLogger","PagePluginMessageSender","PopupWindow","ReactDOM","ShimButton.react","Vector","XPluginPageMessagesTabSentryConfirmActionController","XPluginPageMessagesTabSentryController","XPluginPageMessagesTabSentryPopupPluginController","XUIButton.react","XUISpinner.react","react"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){b=a.call(this,b,d)||this;b.$1=new(c("PagePluginLogger"))(b.props.pageID,b.props.refererURI);b.$2=new(c("PagePluginMessageSender"))(b.props.userID,b.props.threadID,b.props.pageID,b.props.refererURI);b.state={shouldShowMessageSentView:!1,isSentryPending:!1,isWaitingForUserConfirmation:!1,isSentryError:!1,message:"",bottomPartHeight:0};return b}var e=b.prototype;e.componentDidMount=function(){this.$1.notify(c("PagePluginEvents").page_plugin.tab.render,"messages"),this.setState({bottomPartHeight:this.$3()})};e.$3=function(){var a=this.refs.bottomRoot;if(!a)return 0;a=d("ReactDOM").findDOMNode(a);return!a?0:c("Vector").getElementDimensions(a).y};e.$4=function(){var a=this,b=this.state.message;window.notifySentryConfirm=function(){a.$5(b),window.notifySentryConfirm=void 0};var e=c("XPluginPageMessagesTabSentryPopupPluginController").getURIBuilder().setString("page_id",this.props.pageID).setString("message",this.state.message).setString("thread_id",this.props.threadID).setString("iframe_referer",this.props.refererURI).getURI();d("PopupWindow").open(e,270,450)};e.$6=function(){var a=this;d("ODS").bumpEntityKey(2966,"messenger_commerce","page_plugin.check_sentry");this.setState({isSentryPending:!0});var b=c("XPluginPageMessagesTabSentryController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(b).setMethod("POST").setData({page_id:this.props.pageID,message:this.state.message,iframe_referer:this.props.refererURI}).setHandler(function(b){b=b.payload;b.result===1?a.$7():b.result===0?a.$8():a.$9()}).setErrorHandler(function(){a.$9()}).send()};e.$8=function(){this.setState({isSentryPending:!1}),this.$10()};e.$10=function(){d("ODS").bumpEntityKey(2966,"messenger_commerce","page_plugin.send_message"),this.$2.sendMessage(this.state.message,"pages_plugin:message_tab"),this.setState({message:"",shouldShowMessageSentView:!0})};e.$7=function(){this.setState({isWaitingForUserConfirmation:!0,isSentryPending:!1})};e.$9=function(){this.setState({isSentryPending:!1,isSentryError:!0})};e.$5=function(a){this.setState({isWaitingForUserConfirmation:!1,isSentryPending:!1,message:"",shouldShowMessageSentView:!0});var b=c("XPluginPageMessagesTabSentryConfirmActionController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(b).setMethod("POST").setData({page_id:this.props.pageID,message:a,iframe_referer:this.props.refererURI}).send()};e.$11=function(){var a=this,b=i._("Nh\u1eadp tin nh\u1eafn cho {page_name}...",[i._param("page_name",this.props.pageName)]);return k.jsx("div",{className:"_2p5m",style:{bottom:this.state.bottomPartHeight+"px"},children:k.jsx(c("AbstractTextArea.react"),{disabled:this.state.isSentryPending||this.state.isWaitingForUserConfirmation||this.state.isSentryError,onChange:function(b){return a.setState({message:b.target.value})},placeholder:b,value:this.state.message})})};e.$12=function(){var a=this;return k.jsx(c("XUIButton.react"),{className:"_2p5n",size:"large",label:i._("G\u1eedi tin nh\u1eafn kh\u00e1c"),onClick:function(){return a.setState({shouldShowMessageSentView:!1})}})};e.$13=function(){return k.jsx(c("Image.react"),{className:"_387u",src:j("30160"),width:24})};e.$14=function(){return k.jsxs("div",{className:"_1lhb",children:[this.$13(),k.jsx("div",{className:"_2wni",children:i._("L\u1ed7i")})]})};e.$15=function(){var a=this;return k.jsxs(c("ShimButton.react"),{className:"_1lhb _2wnh",onClick:function(){return a.$4()},children:[this.$13(),k.jsx("div",{className:"_2wni",children:i._("X\u00e1c nh\u1eadn")})]})};e.$16=function(){var a=this;return k.jsx(c("XUIButton.react"),{className:"_2p5n",size:"large",use:"confirm",label:i._("G\u1eedi"),onClick:function(){return a.$6()},disabled:this.state.isSentryPending||this.state.message.trim()==="",image:this.state.isSentryPending?k.jsx(c("XUISpinner.react"),{}):null})};e.$17=function(){var a=null;this.state.shouldShowMessageSentView?a=this.$12():this.state.isSentryError?a=this.$14():this.state.isWaitingForUserConfirmation?a=this.$15():a=this.$16();return k.jsxs(c("Layout.react"),{className:"_2p5v",children:[k.jsx(c("Layout.react").FillColumn,{className:"_5rto",children:this.props.responsiveness}),k.jsx(c("Layout.react").Column,{children:a})]})};e.$18=function(){return k.jsxs(c("Layout.react"),{className:"_2p5w",children:[k.jsx(c("Layout.react").Column,{children:k.jsx(c("Image.react"),{className:"_2p5x",src:j("95074"),width:"28"})}),k.jsx(c("Layout.react").FillColumn,{children:k.jsx("div",{className:"_2p5y",children:i._("Tin nh\u1eafn \u0111\u00e3 g\u1eedi cho {page-name} v\u00e0 c\u00e2u tr\u1ea3 l\u1eddi c\u1ee7a h\u1ecd s\u1ebd hi\u1ec3n th\u1ecb trong Messenger",[i._param("page-name",k.jsx("span",{children:this.props.pageName}))])})})]})};e.$19=function(){var a=k.jsxs("div",{className:"_2p5z",children:[k.jsx(c("Image.react"),{className:"_2p5-",src:j("28210"),width:32}),k.jsx("div",{className:"_2p5_",children:i._("\u0110\u00e3 g\u1eedi tin nh\u1eafn")}),k.jsx("div",{className:"_2p60",children:i._("\u0110\u00e3 g\u1eedi tin nh\u1eafn. H\u00e3y \u0111\u0103ng nh\u1eadp Messenger tr\u00ean thi\u1ebft b\u1ecb di \u0111\u1ed9ng ho\u1eb7c truy c\u1eadp {messenger_url} \u0111\u1ec3 xem cu\u1ed9c tr\u00f2 chuy\u1ec7n.",[i._param("messenger_url",k.jsx(c("Link.react"),{href:"https://messenger.com",target:"_blank",children:"messenger.com"}))])})]});return k.jsxs("div",{className:"_1_c3",children:[k.jsx("div",{className:"_2p61",children:k.jsx("div",{className:"_2p62",children:a})}),k.jsx("div",{className:"_2p63",children:this.$17()})]})};e.$20=function(){return k.jsxs("div",{className:"_1_c3",children:[this.$11(),k.jsxs("div",{className:"_2p63",ref:"bottomRoot",children:[this.$18(),this.$17()]})]})};e.render=function(){if(this.state.shouldShowMessageSentView)return this.$19();else return this.$20()};return b}(k.Component);g["default"]=a}),98);